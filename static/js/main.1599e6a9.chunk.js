(this.webpackJsonpdispense=this.webpackJsonpdispense||[]).push([[0],{100:function(e,t,a){e.exports={NavigationItem:"NavigationItem_NavigationItem__1eRaQ",active:"NavigationItem_active__1Y64k"}},102:function(e,t,a){e.exports={"header-container":"Home_header-container__j0Bzs"}},12:function(e,t,a){e.exports={"form-container":"PersonalInfo_form-container__2QQ0t","info-item":"PersonalInfo_info-item__rP1KZ",NKDA_item:"PersonalInfo_NKDA_item__1FdCt",error:"PersonalInfo_error__24V_t","success-text":"PersonalInfo_success-text__1kTOT"}},125:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(59),c=a.n(o);t.a=function(e){return r.a.createElement("section",{className:c.a["button-container"]},e.buttonNames.map((function(t){return r.a.createElement("button",{onClick:"Cancel"===t?e.cancel:e.action,key:t,className:c.a.button,type:"button"},t)})))}},126:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(7),r=a(0),o=a.n(r),c=a(247),l=a(248),i=a(249),u=a(250),s=a(103),m=a(254),d=a(252),g=Object(c.a)((function(e){return{table:{marginTop:e.spacing(3),"& thead th":{fontWeight:"600",color:"#ffffff",backgroundColor:"#f5073b",align:"left",width:"100"},"& tbody td":{fontWeight:"300",align:"left",width:"100"},"& tbody tr:hover":{backgroundColor:"#fffbf2",cursor:"pointer"}}}}));function f(e,t,a,c){var f=g(),p=Object(r.useState)(0),h=Object(n.a)(p,2),v=h[0],E=h[1],b=Object(r.useState)(c[v]),N=Object(n.a)(b,2),y=N[0],_=N[1],O=Object(r.useState)(),k=Object(n.a)(O,2),w=k[0],j=k[1],S=Object(r.useState)(),C=Object(n.a)(S,2),I=C[0],x=C[1],D=function(e,t){E(t)},T=function(e){_(parseInt(e.target.value,10)),E(0)},P=function(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0};return{TblContainer:function(e){return o.a.createElement(l.a,{stickyHeader:!0,className:f.table},e.children)},TblHead:function(e){return o.a.createElement(i.a,null,o.a.createElement(u.a,null,t.map((function(e){return Array.isArray(e)?e.map((function(e,t){return o.a.createElement(r.Fragment,null,o.a.createElement(s.a,{key:e["drugItem"+ +(t+1)].id,sortDirection:I===e["drugItem"+ +(t+1)].id&&w},e["drugItem"+ +(t+1)].label),o.a.createElement(s.a,{key:e["drugQty"+ +(t+1)],sortDirection:I===e["drugQty"+ +(t+1)]&&w},e["drugQty"+ +(t+1)].label))})):o.a.createElement(s.a,{key:e.id,sortDirection:I===e.id&&w,align:"left",width:"220"},e.disableSorting?e.label:o.a.createElement(m.a,{active:I===e.id,direction:I===e.id?w:"asc",onClick:function(){var t;t=e.id,j(I===t&&"asc"===w?"desc":"asc"),x(t)}},e.label))}))))},TblPagination:function(){return o.a.createElement(d.a,{component:"div",page:v,rowsPerPageOptions:c,rowsPerPage:y,count:e?e.length:0,onChangePage:D,onChangeRowsPerPage:T})},recordsAfterPaginationAndSorting:function(){return function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(a.fn(e),function(e,t){return"desc"===e?function(e,a){return P(e,a,t)}:function(e,a){return-P(e,a,t)}}(w,I)).slice(v*y,(v+1)*y)}}}},137:function(e,t,a){e.exports={Backdrop:"Backdrop_Backdrop__3IWjo"}},138:function(e,t,a){e.exports={main_container:"Main_main_container__3lk47"}},139:function(e,t,a){"use strict";a.r(t);var n=a(43),r=a(9),o=a(7),c=a(0),l=a.n(c),i=a(54),u=a(24),s=a(142),m=a.n(s),d=a(17),g=a(12),f=a.n(g),p={caseCode:{touched:!1,error:!1,value:""},chineseName:{touched:!1,error:!1,value:""},englishName:{touched:!1,error:!1,value:""},age:{touched:!1,error:!1,value:""},contactNumber:{touched:!1,error:!1,value:""},dateOfRegistration:{touched:!1,error:!1,value:""},address:{touched:!1,error:!1,value:""},allergy:{touched:!1,error:!1,value:""},adverseDrugReaction:{touched:!1,error:!1,value:""},remark:{touched:!1,error:!1,value:""}};t.default=function(e){var t=Object(c.useState)(p),a=Object(o.a)(t,2),s=a[0],g=a[1],h=Object(c.useState)(!1),v=Object(o.a)(h,2),E=v[0],b=v[1],N=Object(c.useState)(!1),y=Object(o.a)(N,2),_=y[0],O=y[1];Object(c.useEffect)((function(){if(/[\/]patient[\/]existing[\/].+/.test(window.location.pathname)){var e={query:'  \n             query {\n               patients(_id:"'.concat(window.location.pathname.split("/")[3],'") {\n                caseCode\n                chineseName \n                englishName\n                age\n                contactNumber\n                dateOfRegistration\n                address\n                allergy\n                adverseDrugReaction\n                remark\n                updatedAt\n               }\n             }\n          ')};b(!0),fetch(d.graphqlServerUrl,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("dispenseToken")}}).then((function(e){return 200!==e.status&&201!==e.status&&(b(!1),alert("error")),e.json()})).then((function(e){g({caseCode:{touched:!1,error:!1,value:e.data.patients[0].caseCode},chineseName:{touched:!1,error:!1,value:e.data.patients[0].chineseName},englishName:{touched:!1,error:!1,value:e.data.patients[0].englishName},age:{touched:!1,error:!1,value:e.data.patients[0].age},contactNumber:{touched:!1,error:!1,value:e.data.patients[0].contactNumber},dateOfRegistration:{touched:!1,error:!1,value:e.data.patients[0].dateOfRegistration?new Date(e.data.patients[0].dateOfRegistration).toISOString().substring(0,10):""},address:{touched:!1,error:!1,value:e.data.patients[0].address},allergy:{touched:!1,error:!1,value:e.data.patients[0].allergy},adverseDrugReaction:{touched:!1,error:!1,value:e.data.patients[0].adverseDrugReaction},remark:{touched:!1,error:!1,value:e.data.patients[0].remark}}),b(!1)})).catch((function(e){b(!1),alert(e)}))}else g(p)}),[window.location.pathname]);var k=function(e,t){g(Object(r.a)(Object(r.a)({},s),{},Object(n.a)({},e,{touched:!0,value:t.target.value,error:w(e,t.target.value)})))},w=function(e,t){var a=!1;if("age"===e)a=!(t&&t.replaceAll(" ","").length>0&&+t>=0&&+t<=120);else if("contactNumber"===e){a=!new RegExp(/^\+?[0-9]+$/).test(t.replaceAll(" ",""))}else"caseCode"===e&&(a=0===t.replaceAll(" ","").length);return a},j=function(){O(!1)},S=l.a.createElement("p",{style:{color:"#f44336",margin:"2px"}},"Invalid");return l.a.createElement(c.Fragment,null,E?l.a.createElement("div",{className:f.a["form-container"]}," ",l.a.createElement(u.a,null)," "):l.a.createElement("form",{className:f.a["form-container"],onSubmit:function(t){t.preventDefault();var a="";s.dateOfRegistration.value.length>0&&(a=new Date(s.dateOfRegistration.value).toISOString());var n,o=m()(s),c=!1;for(var l in o)c=c||w(l,o[l].value),o[l].touched=!0,o[l].error=w(l,o[l].value);c?g(Object(r.a)({},o)):(n="/patient/new"===e.routeName?{query:'\n           mutation {\n            createPatient (\n               patientInfoInput:{\n                caseCode: "'.concat(s.caseCode.value,'" ,\n                chineseName:"').concat(s.chineseName.value,'",\n                englishName: "').concat(s.englishName.value,'",\n                age:"').concat(String.valueOf(s.age.value),'",\n                contactNumber:"').concat(s.contactNumber.value,'",\n                dateOfRegistration:"').concat(a,'",\n                address: "').concat(s.address.value,'",\n                allergy: "').concat(s.allergy.value,'",\n                adverseDrugReaction: "').concat(s.adverseDrugReaction.value,'",\n                remark: "').concat(s.remark.value,'"           \n                }) {\n               age\n             }\n           }\n        ')}:{query:'\n           mutation {\n            updatePatient (\n              _id:"'.concat(window.location.pathname.split("/")[3],'",\n               patientInfoInput:{\n                caseCode: "').concat(s.caseCode.value,'" ,\n                chineseName:"').concat(s.chineseName.value,'",\n                englishName: "').concat(s.englishName.value,'",\n                age:"').concat(s.age.value,'",\n                contactNumber:"').concat(s.contactNumber.value,'",\n                dateOfRegistration:"').concat(a,'",\n                address: "').concat(s.address.value,'",\n                allergy: "').concat(s.allergy.value,'",\n                adverseDrugReaction: "').concat(s.adverseDrugReaction.value,'",\n                remark: "').concat(s.remark.value,'"           \n                }) {\n               age\n             }\n           }\n        ')},b(!0),fetch(d.graphqlServerUrl,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("dispenseToken")}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){t.errors?alert(t.errors):"/patient/new"===e.routeName?(O(!0),g(p)):(e.updateInfo(window.location.pathname.split("/")[3],{caseCode:o.caseCode.value,englishName:o.englishName.value,chineseName:s.chineseName.value}),O(!0)),b(!1)})).catch((function(e){b(!1),alert("An unexpected error occured!")})))}},l.a.createElement(i.a,{show:_,modalClosed:j},l.a.createElement("div",{className:f.a["success-text"]},l.a.createElement("p",null,"Success!"),l.a.createElement("button",{type:"button",onClick:j},"Confirm"))),l.a.createElement("section",{className:f.a["info-item"]},l.a.createElement("label",{htmlFor:"caseCode"},"Case Code:"),l.a.createElement("input",{className:s.caseCode.error&&s.caseCode.touched?f.a.error:null,type:"text",id:"caseCode",name:"caseCode",value:s.caseCode.value,onChange:function(e){return k("caseCode",e)}}),s.caseCode.error&&s.caseCode.touched?S:null),l.a.createElement("section",{className:f.a["info-item"]},l.a.createElement("label",{htmlFor:"chineseName"},"Chinese Name:"),l.a.createElement("input",{className:s.chineseName.error&&s.chineseName.touched?f.a.error:null,type:"text",id:"chineseName",name:"chineseName",value:s.chineseName.value,onChange:function(e){return k("chineseName",e)}}),s.chineseName.error&&s.chineseName.touched?S:null),l.a.createElement("section",{className:f.a["info-item"]},l.a.createElement("label",{htmlFor:"englishName"},"English Name:"),l.a.createElement("input",{className:s.englishName.error&&s.englishName.touched?f.a.error:null,type:"text",id:"englishName",name:"englishName",value:s.englishName.value,onChange:function(e){return k("englishName",e)}}),s.englishName.error&&s.englishName.touched?S:null),l.a.createElement("section",{className:f.a["info-item"]},l.a.createElement("label",{htmlFor:"age"},"Age:"),l.a.createElement("input",{className:s.age.error&&s.age.touched?f.a.error:null,type:"number",id:"age",name:"age",value:s.age.value,onChange:function(e){return k("age",e)}}),s.age.error&&s.age.touched?S:null),l.a.createElement("section",{className:f.a["info-item"]},l.a.createElement("label",{htmlFor:"contactNumber"},"Contact Number:"),l.a.createElement("input",{className:s.contactNumber.error&&s.contactNumber.touched?f.a.error:null,type:"phone",id:"contactNumber",name:"contactNumber",value:s.contactNumber.value,onChange:function(e){return k("contactNumber",e)}}),s.contactNumber.error&&s.contactNumber.touched?S:null),l.a.createElement("section",{className:f.a["info-item"]},l.a.createElement("label",{htmlFor:"regDate"},"Date of Registration"),l.a.createElement("input",{className:s.dateOfRegistration.error&&s.dateOfRegistration.touched?f.a.error:null,type:"date",id:"regDate",name:"regDate",value:s.dateOfRegistration.value,onChange:function(e){return k("dateOfRegistration",e)}}),s.dateOfRegistration.error&&s.dateOfRegistration.touched?S:null),l.a.createElement("section",{className:f.a["info-item"]},l.a.createElement("label",{htmlFor:"address"},"Address:"),l.a.createElement("textarea",{className:s.address.error&&s.address.touched?f.a.error:null,type:"text",id:"address",name:"address",value:s.address.value,onChange:function(e){return k("address",e)}}),s.address.error&&s.address.touched?S:null),l.a.createElement("section",{className:f.a["info-item"]},l.a.createElement("label",{htmlFor:"allergy"},"Allergy:"),l.a.createElement("div",{className:f.a.NKDA_item,onClick:function(){g(Object(r.a)(Object(r.a)({},s),{},{allergy:Object(r.a)(Object(r.a)({},s.allergy),{},{value:"No Known Drug Allergy"})}))}},"NKDA"),l.a.createElement("textarea",{className:s.allergy.error&&s.allergy.touched?f.a.error:null,id:"allergy",name:"allergy",rows:"4",cols:"20",value:s.allergy.value,onChange:function(e){return k("allergy",e)}}),s.allergy.error&&s.allergy.touched?S:null),l.a.createElement("section",{className:f.a["info-item"]},l.a.createElement("label",{htmlFor:"adr"},"Adverse Drug Reaction:"),l.a.createElement("textarea",{className:s.adverseDrugReaction.error&&s.adverseDrugReaction.touched?f.a.error:null,id:"adr",name:"adr",rows:"4",cols:"20",value:s.adverseDrugReaction.value,onChange:function(e){return k("adverseDrugReaction",e)}}),s.adverseDrugReaction.error&&s.adverseDrugReaction.touched?S:null),l.a.createElement("section",{className:f.a["info-item"]},l.a.createElement("label",{htmlFor:"remark"},"Remark:"),l.a.createElement("textarea",{className:s.remark.error&&s.remark.touched?f.a.error:null,id:"remark",name:"remark",rows:"4",cols:"20",value:s.remark.value,onChange:function(e){return k("remark",e)}}),s.remark.error&&s.remark.touched?S:null),l.a.createElement("button",{type:"submit"},"/patient/new"===e.routeName?"Create":"Update")))}},141:function(e,t,a){e.exports={Loader:"Loader_Loader__kXC18",load6:"Loader_load6__21Q3l",round:"Loader_round__QCIGG"}},143:function(e,t,a){e.exports={list:"NavigationItems_list__3Dhpt"}},144:function(e,t,a){e.exports={"main-nav":"EPHeaderNav_main-nav__1cjQF"}},145:function(e,t,a){e.exports={"component-container":"ExistingPatientProfile_component-container__2mEvy"}},147:function(e,t,a){e.exports={Layout:"DrugInfo_Layout__1hcSZ"}},148:function(e,t,a){e.exports=a.p+"static/media/logo192.2eecab00.png"},162:function(e,t,a){e.exports=a(244)},167:function(e,t,a){},168:function(e,t,a){},17:function(e,t){t.graphqlServerUrl="https://arcane-earth-96378.herokuapp.com/graphql"},24:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(141),c=a.n(o);t.a=function(e){return r.a.createElement("div",{className:c.a.Loader},"Loading...")}},243:function(e,t,a){e.exports=a.p+"static/media/Pill.48202449.jpg"},244:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),l=(a(167),a(7)),i=a(9),u=a(30),s=a(14),m=(a(168),r.a.createContext({token:null,userId:null,login:function(e,t,a){},logout:function(){}})),d=function(e){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){function a(a){t.current&&!t.current.contains(a.target)?e.cancelShowLogout():t.current&&t.current.contains(a.target)&&e.showLogout()}return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}}),[t]),r.a.createElement("div",{ref:t},e.children)},g=a(76),f=a.n(g),p=a(245),h=a(132),v=a.n(h),E=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),o=a[0],c=a[1],i=Object(n.useContext)(m);return r.a.createElement("div",{className:f.a.Toolbar},r.a.createElement(p.a,{onClick:e.drawerToggleClicked},r.a.createElement(v.a,{style:{fill:"white",cursor:"pointer"}})),r.a.createElement(d,{cancelShowLogout:function(){c(!1)},showLogout:function(){c(!0)}},r.a.createElement("div",{className:f.a.circle},"A"),r.a.createElement("div",{className:f.a.logout,style:{display:o?"block":"none"}},r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){i.logout()}},"Log out")))))},b=a(133),N=a.n(b),y=a(77),_=a.n(y),O=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:_.a.Logo},r.a.createElement(N.a,{style:{fill:"#ab1032",fontSize:50}}),r.a.createElement("div",null," PHHK")),r.a.createElement("div",null,r.a.createElement("p",{className:_.a["welcome-msg"]},"Welcome, Admin")),r.a.createElement("div",null,r.a.createElement("p",{className:_.a.demo},"Dispense Demo")))},k=a(60),w=a.n(k),j=a(95),S=a.n(j),C=function(e){return r.a.createElement("li",{className:S.a.NavigationItem},r.a.createElement(u.b,{exact:e.exact,to:e.link,activeClassName:S.a.active},r.a.createElement("div",null,e.children)))},I=a(135),x=a.n(I),D=a(134),T=a.n(D),P=a(136),F=a.n(P),R=function(){return r.a.createElement("ul",{className:w.a.NavigationItems},r.a.createElement(C,{link:"/patient/new"},r.a.createElement(T.a,{style:{fontSize:30}}),r.a.createElement("span",{className:w.a.spacer}),"New Patient"),r.a.createElement(C,{link:"/patient/existing"},r.a.createElement(x.a,{style:{fontSize:30}}),r.a.createElement("span",{className:w.a.spacer}),"Existing Patient"),r.a.createElement(C,{link:"/druginfo"},r.a.createElement(F.a,{style:{fontSize:30}}),r.a.createElement("span",{className:w.a.spacer}),"Drug Information"))},q=a(42),A=a.n(q),L=a(73),B=function(e){var t;return t=e.show?[A.a.SideDrawer,A.a.Open]:[A.a.SideDrawer,A.a.Close],r.a.createElement(n.Fragment,null,r.a.createElement(L.a,{show:e.show,clicked:e.closed}),r.a.createElement("div",{className:t.join(" ")},r.a.createElement("div",{className:A.a.Logo},r.a.createElement(O,null)),r.a.createElement("div",{className:A.a.spacer}),r.a.createElement("nav",null,r.a.createElement(R,null))))},H=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),o=a[0],c=a[1];return r.a.createElement(n.Fragment,null,r.a.createElement(E,{drawerToggleClicked:function(){c(!o)}}),r.a.createElement(B,{show:o,closed:function(){c(!1)}}),e.children)},z=a(138),U=a.n(z),Q=a(78),W=a.n(Q),J=a(139),M=function(e){return r.a.createElement("div",{className:W.a["new-patient-container"]},r.a.createElement("div",{className:W.a.background}),r.a.createElement("div",{className:W.a["personal-info-container"]},r.a.createElement(J.default,{routeName:"/patient/new",token:e.token})))},K=a(39),Z=a(17),Y=a(143),$=a.n(Y),G=a(99),V=a.n(G),X=function(e){return r.a.createElement("li",{className:V.a.NavigationItem},r.a.createElement(u.b,{to:e.link,activeClassName:V.a.active},e.children))},ee=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),o=a[0],c=a[1];return Object(n.useEffect)((function(){c(e.patientBriefInfo)}),[e]),r.a.createElement("ul",{onClick:e.click,className:$.a.list},o?o.map((function(e,t){return r.a.createElement(X,{link:"/patient/existing/"+e._id,key:t},e.caseCode+" "+e.chineseName+"("+e.englishName+")")})):null)},te=a(61),ae=a.n(te),ne=a(100),re=a.n(ne),oe=function(e){return r.a.createElement("li",{className:re.a.NavigationItem,onClick:function(){return e.onNavHandler(e.id)}},r.a.createElement("button",{className:e.id==e.clickedHeader?re.a.active:null},function(e){switch(e){case"personalinfo":return"Personal Information";case"transactionrecord":return"Transaction Record"}}(e.id)))},ce=a(144),le=a.n(ce),ie=function(e){var t=window.location.pathname.split("/")[3],a=[{id:"personalinfo",text:"Personal Information",link:"/patient/existing/".concat(t,"/personalinfo"),auth:!0},{id:"transactionrecord",text:"Transaction Record",link:"/patient/existing/".concat(t,"/transactionrecord"),auth:!0}];return r.a.createElement("nav",null,r.a.createElement("ul",{className:le.a["main-nav"]},a.map((function(t){return r.a.createElement(oe,{clickedHeader:e.clickedHeader,onNavHandler:e.onNavHandler,key:t.id,id:t.id,link:t.link,text:t.text})}))))},ue=a(145),se=a.n(ue),me=r.a.lazy((function(){return a.e(5).then(a.bind(null,712))})),de=r.a.lazy((function(){return Promise.resolve().then(a.bind(null,139))})),ge=r.a.memo((function(e){var t=Object(n.useState)("personalinfo"),a=Object(l.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(""),u=Object(l.a)(i,2),s=u[0],m=u[1];Object(n.useEffect)((function(){var e={query:'  \n                 query {\n                   patients(_id:"'.concat(window.location.pathname.split("/")[3],'") {\n                    caseCode\n                    chineseName \n                    englishName\n                   }\n                 }\n              ')};fetch(Z.graphqlServerUrl,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("dispenseToken")}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){m([].concat(Object(K.a)(e.data.patients),[{_id:window.location.pathname.split("/")[3]}]))})).catch((function(e){alert("An unexpected error occured!")}))}),[window.location.pathname]);return r.a.createElement("section",null,r.a.createElement(ie,{onNavHandler:function(e){c(e)},clickedHeader:o}),r.a.createElement("div",{className:se.a["component-container"]},"personalinfo"===o?r.a.createElement(n.Suspense,{fallback:r.a.createElement("h1",null,"loading...")},r.a.createElement(de,Object.assign({token:localStorage.getItem("dispenseToken"),updateInfo:e.updateInfo},e,{routeName:"/patient/existing"}))):null,"transactionrecord"===o?r.a.createElement(n.Suspense,{fallback:r.a.createElement("h1",null,"loading...")},r.a.createElement(me,Object.assign({token:localStorage.getItem("dispenseToken"),patientInfo:s,patientId:window.location.pathname.split("/")[3]},e))):null))})),fe=a(24),pe=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),o=a[0],c=a[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],g=m[1],f=Object(n.useState)(!1),p=Object(l.a)(f,2),h=p[0],v=p[1];Object(n.useEffect)((function(){v(!0),fetch(Z.graphqlServerUrl,{method:"POST",body:JSON.stringify({query:"\n                 query {\n                   patients {\n                    _id\n                    caseCode\n                    chineseName \n                    englishName\n                   }\n                 }\n              "}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){c(Object(K.a)(e.data.patients)),v(!1)})).catch((function(e){v(!1)}))}),[]);var E=function(e,t){var a=Object(K.a)(o),n=a.findIndex((function(t){return t._id===e}));a[n]=Object(i.a)(Object(i.a)({},t),{},{_id:e}),c(a)};return r.a.createElement("div",{className:ae.a["main-container"]},r.a.createElement("div",null,r.a.createElement("p",{className:ae.a["sidebar-header"]},"Patient List"),r.a.createElement("nav",{className:ae.a.sidebar},h?r.a.createElement(fe.a,null):r.a.createElement(ee,{patientBriefInfo:o,click:function(){g(!0)}}))),r.a.createElement("div",{className:ae.a["main-content"]},d?r.a.createElement(s.b,{exact:!0,path:"/patient/existing/:id",render:function(e){return r.a.createElement(ge,Object.assign({token:e.token,updateInfo:E},e))}}):null))},he=a(294),ve=a(295),Ee=a(250),be=a(103),Ne=a(128),ye=a.n(Ne),_e=a(127),Oe=a.n(_e),ke=a(106),we=a.n(ke),je=a(125),Se=a(54),Ce=a(43),Ie=a(59),xe=a.n(Ie),De=a(79),Te=a.n(De),Pe=function(e){var t=Object(n.useState)({name:"",price:"",quantity:""}),a=Object(l.a)(t,2),o=a[0],c=a[1],u=Object(n.useState)({name:!1,price:!1}),s=Object(l.a)(u,2),m=s[0],d=s[1],g=Object(n.useState)(!1),f=Object(l.a)(g,2),p=f[0],h=f[1];Object(n.useEffect)((function(){if(h(!0),e.id){var t={query:"\n                     query Drugs($id:ID) {\n                       drugs(_id:$id) {\n                        _id\n                        name\n                        price\n                        quantity\n                       }\n                     }\n                  ",variables:{id:e.id}};fetch(Z.graphqlServerUrl,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("dispenseToken")}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){var t=Object(i.a)({},e.data.drugs[0]);console.log(t),c(t),h(!1)})).catch((function(e){h(!1)}))}else c({name:"",price:"",quantity:""}),h(!1);d({name:!1,price:!1,quantity:!1})}),[e]);var v=function(e){return!e||""===e},E=function(e,t){Object(i.a)({},m[t]).touched=!0,c(Object(i.a)(Object(i.a)({},o),{},Object(Ce.a)({},t,e.target.value)))};return r.a.createElement(n.Fragment,null,p?r.a.createElement(fe.a,null):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:Te.a["flex-container"]},r.a.createElement("section",null,r.a.createElement("h2",null,"Drug Item Name:"),r.a.createElement("textarea",{className:m.name?[Te.a.error]:null,style:{marginLeft:"0"},rows:"1",cols:"50",type:"text",placeholder:"Name",value:o.name,onChange:function(e){return E(e,"name")}})),r.a.createElement("section",null,r.a.createElement("h2",null,"Price:"),r.a.createElement("input",{className:m.price?[Te.a.error]:null,type:"number",placeholder:"Price",value:o.price,onChange:function(e){return E(e,"price")}})),r.a.createElement("section",null,r.a.createElement("h2",null,"Quantity:"),r.a.createElement("input",{type:"number",placeholder:"Quantity",value:o.quantity,onChange:function(e){return E(e,"quantity")}})),r.a.createElement("div",null)),r.a.createElement("section",{style:{textAlign:"center",marginTop:"30"}},r.a.createElement("button",{className:xe.a.button,type:"button",onClick:function(){var t;v(o.name)||v(o.price)?d({name:v(o.name),price:v(o.price)}):(t={query:e.id?'  \n            mutation {\n               updateDrug(\n                    _id: "'.concat(e.id,'",\n                   drugInput:{\n                     name:"').concat(o.name,'",\n                     quantity:').concat(+o.quantity,",\n                     price: ").concat(+o.price,",\n                     }\n               ) {\n                  name\n              }\n            }\n         "):'  \n            mutation {\n               createDrug(\n                   drugInput:{\n                       name:"'.concat(o.name,'",\n                       quantity:').concat(+o.quantity,",\n                       price: ").concat(+o.price,",\n                     }\n               ) \n            }\n         ")},h(!0),fetch(Z.graphqlServerUrl,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("dispenseToken")}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){t.errors?alert(t.errors):(h(!1),e.cancelModal(),e.id?e.entryChangeHandler("update",e.id,Object(i.a)({},o)):e.entryChangeHandler("create",null,Object(i.a)(Object(i.a)({},o),{},{_id:t.data.createDrug._id})))})).catch((function(e){h(!1),alert(e)})))}},e.id?"Update":"Create"))))},Fe=a(126),Re=a(147),qe=a.n(Re),Ae=[{id:"name",label:"Drug Item"},{id:"price",label:"Price"},{id:"quantity",label:"Available Quantity"},{id:"edit",label:"Edit",disableSorting:!0}],Le=function(e){var t=Object(n.useState)([{name:"Loading",price:"",quantity:0}]),a=Object(l.a)(t,2),o=a[0],c=a[1],u=Object(n.useState)({fn:function(e){return e},value:null}),s=Object(l.a)(u,2),m=s[0],d=s[1],g=Object(n.useState)({open:!1,id:null}),f=Object(l.a)(g,2),h=f[0],v=f[1],E=Object(n.useState)({open:!1,id:null}),b=Object(l.a)(E,2),N=b[0],y=b[1],_=Object(n.useState)(!1),O=Object(l.a)(_,2),k=O[0],w=O[1],j=Object(Fe.a)(o,Ae,m,[5,10,15]),S=j.TblContainer,C=j.TblHead,I=j.TblPagination,x=j.recordsAfterPaginationAndSorting;Object(n.useEffect)((function(){fetch(Z.graphqlServerUrl,{method:"POST",body:JSON.stringify({query:"\n                 query Drugs {\n                   drugs{\n                       _id\n                       name \n                       price\n                       quantity\n                   }\n                 }\n              "}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("dispenseToken")}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){e.data.drugs.map((function(e){e.price=+e.price})),c(e.data.drugs)})).catch((function(e){alert(e)}))}),[]);var D=function(e){v({open:!0,id:e})},T=function(){v({open:!1,id:null})},P=function(){y({open:!1,id:null})},F=function(e,t,a){var n=Object(K.a)(o);switch(e){case"delete":var r=n.findIndex((function(e){return e._id===t}));n.splice(r,1),c(n);break;case"update":var l=n.findIndex((function(e){return e._id===t}));n[l]=Object(i.a)({},a),c(n);break;case"create":n.push(Object(i.a)({},a)),c(n)}};return r.a.createElement("div",{className:qe.a.Layout},r.a.createElement("textarea",{value:m.value?m.value:"",placeholder:"Search",rows:"1",cols:"160",onChange:function(e){var t=e.target;d({fn:function(e){return""===t.value?e:(console.log(e[0].name.toLowerCase()),e.filter((function(e){return e.name.toLowerCase().includes(t.value.toLowerCase())})))},value:t.value})}}),r.a.createElement(Se.a,{show:h.open,modalClosed:T},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(Pe,{token:localStorage.getItem("dispenseToken"),cancelModal:T,id:h.id,entryChangeHandler:F}))),r.a.createElement(Se.a,{show:N.open,modalClosed:P},k?r.a.createElement(fe.a,null):r.a.createElement(n.Fragment,null,r.a.createElement("p",{style:{fontSize:"large"}},"Are you sure you want to delete this entry?"),r.a.createElement(je.a,{buttonNames:["Delete","Cancel"],action:function(){var e={query:"\n                 mutation DeleteDrug($id:ID!) {\n                   deleteDrug(_id:$id)\n                 }\n              ",variables:{id:N.id}};w(!0),fetch(Z.graphqlServerUrl,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("dispenseToken")}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){w(!1),P(),F("delete",N.id,null)})).catch((function(e){alert(e),w(!1)}))},cancel:P}))),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},r.a.createElement(p.a,{onClick:function(){return D(null)}},r.a.createElement(we.a,{style:{fill:"green",cursor:"pointer"}})),r.a.createElement("span",null,"Add new entry")),r.a.createElement(he.a,null,r.a.createElement(S,null,r.a.createElement(C,null),r.a.createElement(ve.a,null,x().map((function(e){return r.a.createElement(Ee.a,{key:e._id},r.a.createElement(be.a,{align:"left",width:"220",key:e._id+"name"},e.name),r.a.createElement(be.a,{align:"left",width:"220",key:e._id+"price"},e.price),r.a.createElement(be.a,{align:"left",width:"220",key:e._id+"quantity"},e.quantity),r.a.createElement(be.a,{align:"left",width:"220",key:e._id+"edit"},r.a.createElement(n.Fragment,{key:e._id+"Fragment1"},o.length>1?r.a.createElement(n.Fragment,{key:e._id+"Fragment2"},r.a.createElement(p.a,{onClick:function(){return D(e._id)},key:e._id+"Edit"},r.a.createElement(Oe.a,{style:{fill:"#1053ab",cursor:"pointer"},key:e._id+"EditIcon"})),r.a.createElement(p.a,{onClick:function(){return t=e._id,void y({open:!0,id:t});var t},key:e._id+"Delete"},r.a.createElement(ye.a,{style:{fill:"black",cursor:"pointer"},key:e._id+"DeleteIcon"}))):null)))})))),r.a.createElement(I,null)))},Be=a(102),He=a.n(Be),ze=(a(243),function(){return r.a.createElement("div",{className:He.a["header-container"]},r.a.createElement("h1",{className:He.a["welcome-header"]},"Welcome to Dispense Application!"),r.a.createElement("div",null))}),Ue=function(e){return r.a.createElement(n.Fragment,null,null!=localStorage.getItem("dispenseToken")&&"null"!=localStorage.getItem("dispenseToken")?r.a.createElement(H,null,r.a.createElement("main",{className:U.a.main_container},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/patient/new",render:function(e){return r.a.createElement(M,Object.assign({},e,{token:localStorage.getItem("dispenseToken"),routeName:"/patient/new"}))}}),r.a.createElement(s.b,{path:"/patient/existing",render:function(e){return r.a.createElement(pe,Object.assign({token:localStorage.getItem("dispenseToken")},e,{routeName:"/patient/existing"}))}}),r.a.createElement(s.b,{path:"/druginfo",render:function(e){return r.a.createElement(Le,Object.assign({token:localStorage.getItem("dispenseToken")},e))}}),r.a.createElement(s.b,{path:"/home",render:function(e){return r.a.createElement(ze,null)}}),r.a.createElement(s.a,{to:"/home"})))):r.a.createElement(s.a,{to:"/signin"}))},Qe=a(298),We=a(297),Je=a(301),Me=a(300),Ke=a(290),Ze=a(247),Ye=a(296),$e=a(148),Ge=a.n($e),Ve=Object(Ze.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Xe(e){var t=Ve(),a=Object(n.useState)(!1),o=Object(l.a)(a,2),c=o[0],i=o[1],u=Object(n.useRef)(),d=Object(n.useRef)(),g=Object(n.useContext)(m),f=(Object(s.g)(),function(e){e.preventDefault();var t=u.current.value,a=d.current.value,n={query:'\n         query {\n           login (email: "'.concat(t,'", password: "').concat(a,'") {\n             userId\n             token\n             tokenExpiration\n           }\n         }\n      ')};i(!0),fetch(Z.graphqlServerUrl,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){e.data.login.token&&g.login(e.data.login.token,e.data.login.userId,e.data.login.tokenExpiration)})).catch((function(e){i(!1),alert("Incorrect email or password!")}))});return r.a.createElement(m.Consumer,null,(function(e){return e.token?r.a.createElement(s.a,{to:"/"}):r.a.createElement(n.Fragment,null,r.a.createElement("h1",{style:{textAlign:"center"}},"Dispense Application"),r.a.createElement("div",{style:{textAlign:"center",paddingBottom:"0",marginBottom:"0"}},r.a.createElement("img",{src:Ge.a,width:"50",height:"50"})),r.a.createElement(Ye.a,{component:"main",maxWidth:"xs"},c?r.a.createElement(fe.a,null):null,r.a.createElement(We.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(Ke.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:f},r.a.createElement(Je.a,{variant:"outlined",margin:"normal",inputRef:u,required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(Je.a,{variant:"outlined",margin:"normal",inputRef:d,required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(Qe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign In"))),r.a.createElement(Me.a,{mt:8}),r.a.createElement("p",null,"(For demo purpose)You can use test@test.com as the email and 123456 as the password")))}))}var et=r.a.lazy((function(){return Promise.all([a.e(2),a.e(4)]).then(a.bind(null,711))})),tt=function(e,t){switch(t.type){case"Login":return localStorage.setItem("dispenseToken",t.token),Object(i.a)(Object(i.a)({},e),{},{token:t.token,userId:t.userId});case"Logout":return localStorage.removeItem("dispenseToken"),Object(i.a)(Object(i.a)({},e),{},{token:null,userId:null});default:throw new Error("Should not get there!")}},at=function(e){var t=Object(n.useReducer)(tt,{}),a=Object(l.a)(t,2),o=a[0],c=a[1];Object(n.useEffect)((function(){document.title="Dispense"}),[]);return r.a.createElement(u.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(m.Provider,{value:{token:o.token,userId:o.userId,login:function(e,t,a){c({type:"Login",token:e,userId:t})},logout:function(){c({type:"Logout"})}}},r.a.createElement("main",null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/signin",render:function(e){return r.a.createElement(Xe,e)}}),r.a.createElement(s.b,{path:"/print",render:function(e){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(et,null))}}),r.a.createElement(s.b,{path:"/",render:function(e){return r.a.createElement(Ue,e)}}),r.a.createElement(s.a,{to:"/"}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(at,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},42:function(e,t,a){e.exports={SideDrawer:"SideDrawer_SideDrawer__1FLmz",Open:"SideDrawer_Open__1HvEi",Close:"SideDrawer_Close__2M6UG",spacer:"SideDrawer_spacer__1DPvu"}},54:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(98),c=a.n(o),l=a(73),i=a(140),u=a.n(i),s=a(245);t.a=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(l.a,{show:e.show}),r.a.createElement("div",{className:c.a.Modal,style:{display:e.show?"block":"none",transform:e.show?"translateY(0)":"translateY(-100vh)",opacity:e.show?"1":"0",width:e.width,height:e.height}},r.a.createElement("div",{className:c.a["close-icon-container"]},r.a.createElement(s.a,{onClick:e.modalClosed},r.a.createElement(u.a,{style:{cursor:"pointer"}}))),e.children))}},59:function(e,t,a){e.exports={button:"Button_button__2QoFF","button-container":"Button_button-container__3ZwVA"}},60:function(e,t,a){e.exports={NavigationItems:"NavigationItems_NavigationItems__1fvrF",spacer:"NavigationItems_spacer__F1HBf"}},61:function(e,t,a){e.exports={"main-container":"ExistingPatient_main-container__syIGb",sidebar:"ExistingPatient_sidebar__3PZ9k","sidebar-header":"ExistingPatient_sidebar-header__3cHRe"}},73:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(137),c=a.n(o);t.a=function(e){return e.show?r.a.createElement("div",{className:c.a.Backdrop,onClick:e.clicked}):null}},76:function(e,t,a){e.exports={Toolbar:"Toolbar_Toolbar__12p80",circle:"Toolbar_circle__UcnzW",logout:"Toolbar_logout__dpzyF"}},77:function(e,t,a){e.exports={Logo:"Logo_Logo__3c4-b","welcome-msg":"Logo_welcome-msg__y2J9L",demo:"Logo_demo__3DcFA"}},78:function(e,t,a){e.exports={"new-patient-container":"NewPatient_new-patient-container__1I9xr","personal-info-container":"NewPatient_personal-info-container__3Zj-v",background:"NewPatient_background__3Tu4d"}},79:function(e,t,a){e.exports={"flex-container":"DrugInfoEntry_flex-container__3Yn0x",error:"DrugInfoEntry_error__2ZeR7"}},95:function(e,t,a){e.exports={NavigationItem:"NavigationItem_NavigationItem__32yG2",active:"NavigationItem_active__XopZo"}},98:function(e,t,a){e.exports={Modal:"Modal_Modal__1gfAu","close-icon-container":"Modal_close-icon-container__2XWjD"}},99:function(e,t,a){e.exports={NavigationItem:"NavigationItem_NavigationItem__Y3yKC",active:"NavigationItem_active__rgK2T",spacer:"NavigationItem_spacer__cHSST"}}},[[162,1,3]]]);
//# sourceMappingURL=main.1599e6a9.chunk.js.map